"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3761],{53761:(e,t,s)=>{s.r(t),s.d(t,{default:()=>p});var a=s(9950),l=s(1072),c=s(28429),i=s(37017),r=s(42074),o=s(45532),n=s(79988),d=s(7864),h=s(3954),m=s(84257),u=(s(63571),s(44414));const p=function(){(0,c.Zp)();let e=(0,l.A)();const{user:t,authTokens:s}=(0,a.useContext)(o.A);let[p,x]=(0,a.useState)([]),[b,y]=(0,a.useState)([]),[j,_]=(0,a.useState)();const[g,f]=(0,a.useState)(!1),[v,C]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[S,N]=(0,a.useState)(!1),[F,D]=(0,a.useState)([]),[M,A]=(0,a.useState)(!1);(0,a.useEffect)((()=>{O()}),[]);var P=e=>"ON"==e?(0,u.jsx)(i.re,{color:"success",size:"sm"}):"OFF"==e?(0,u.jsx)(i.re,{color:"danger",size:"sm"}):void 0;let O=async()=>{let t=await e.get("get_mstatus_detail_for_tenant_customer_user/");if(1===t.data.success){let e=[];for(let l=0;l<t.data.results.length;l++){let c=t.data.results[l],i={machine_id:c.M_Id,Capacity:c.Capacity,stock_status:(s=c.Stock,a=c.Status,"Refill"==a?(0,u.jsx)("h6",{className:"blink",style:{color:"red"},children:"Refill"}):"red"==a?(0,u.jsxs)("p",{children:[s," / ",(0,u.jsx)(d.A,{className:"blink",icon:h.I,size:"md",style:{color:"red"}})]}):"green"==a?(0,u.jsxs)("p",{children:[s," / ",(0,u.jsx)(d.A,{icon:h.I,size:"md",style:{color:"green"}})]}):"yellow"==a?(0,u.jsxs)("p",{children:[s," / ",(0,u.jsx)(d.A,{icon:h.I,size:"md",style:{color:"#fcb900"}})]}):void 0),machine_status:P(c.machine_status),created_at:c.created_at,mode:c.mode};e.push(i)}x(e)}else if(0===t.data.success)for(let e=0;e<Object.values(t.data.result).length;e++){let s=Object.values(t.data.result)[e];alert(s)}var s,a};const I=async t=>{const s=t.currentTarget;if(t.preventDefault(),!0===s.checkValidity())if(null!==b&&void 0!==b&&b.includes(t.target.machine_id.value))alert("This machine_id already exists");else{const s=new FormData(t.target);s.append("status",!0);let a=await e.post("/machine/machine-masters/",s);if(1===a.data.success)alert("machine_id is created"),N(!1),C(!1),O(),window.location.reload();else if(0===a.data.success)for(let e=0;e<Object.values(a.data.result).length;e++){let t=Object.values(a.data.result)[e];alert(t)}}else N(!0)},z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],l=t.getFullYear(),c=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return"".concat(s," - ").concat(a," - ").concat(l," ").concat(c,":").concat(i)};return z(),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"mb-3",children:[(0,u.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:(0,u.jsx)("h3",{className:"mb-4",style:{color:"#2C384A"},children:"Machine History"})}),(0,u.jsx)(i.sK,{children:(0,u.jsx)(i.UF,{xs:12,children:(0,u.jsx)(i.Pd,{activePage:1,clickableRows:!0,columns:[{key:"sr_no",label:"Sr No.",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"60px"}},{label:"Machine ID",key:"machine_id",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"},sorter:!1},{label:"Created Date",key:"created_at",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"},sorter:!1},{label:"Machine Capacity",key:"Capacity",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"},sorter:!1},{label:"Machine Stock",key:"stock_status",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"120px"},sorter:!1},{label:"Machine Status",key:"machine_status",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"},sorter:!1}],columnSorter:!0,items:p,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{Action:t=>(0,u.jsxs)("td",{children:[(0,u.jsx)(r.N_,{to:"#",onClick:()=>{!0===window.confirm("Are you sure, you want to delete this country?")&&(async t=>{let s=await e.delete("/machine/machine-masters/".concat(t,"/"));if(1===s.data.success)alert("Country is deleted"),O();else if(0===s.data.success)for(let e=0;e<Object.values(s.data.result).length;e++){let t=Object.values(s.data.result)[e];alert(t)}})(t.id)}})," ",(0,u.jsx)(r.N_,{to:"/viewdetails/"+"".concat(t.machine_id),children:(0,u.jsx)(i.t7,{src:n,width:17,height:15,title:"View State"})})]}),sr_no:(e,t)=>(0,u.jsx)("td",{children:t+1}),created_at:e=>(0,u.jsx)("td",{children:z(e.created_at)})},itemsPerPageOptions:[10,20,50,100],tableFilter:!0,tableProps:{color:"success-color-secondary",hover:!0,border:"1.5px solid #074",responsive:!0},tableHeadProps:{color:"light",align:"middle",className:"align-middle"},tableBodyProps:{align:"middle"},tableFilterLabel:"Search : ",tableFilterPlaceholder:"Enter String to Search",itemsPerPageLabel:"Rows per page:"})})})]}),(0,u.jsxs)(i.zS,{size:"lg",visible:v,onClose:()=>[C(!1),N(!1),A(!1)],backdrop:"static",children:[(0,u.jsx)(i.E4,{onClose:()=>[C(!1),N(!1),A(!1)],style:{backgroundColor:"#2596be",color:"white"},children:(0,u.jsx)(i.lb,{children:"Machine Master"})}),(0,u.jsxs)(i.qI,{className:"row g-3 needs-validation",style:{margin:"10px"},noValidate:!0,validated:S,onSubmit:e=>{e.preventDefault(),I(e),e.currentTarget.checkValidity()},children:[(0,u.jsx)(i.Tc,{children:(0,u.jsx)(i.sK,{sm:12,className:"",children:(0,u.jsxs)(i.UF,{sm:12,children:[(0,u.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["Machine Id",(0,u.jsx)("span",{className:"text-danger",children:"*"})]}),(0,u.jsx)(i.OG,{type:"text",id:"machine_id",name:"machine_id",required:!0,maxLength:50}),(0,u.jsx)(i.To,{invalid:!0,children:"Please enter machine id"})]})})}),(0,u.jsxs)(i.If,{children:[(0,u.jsx)(i.Q_,{onClick:()=>[C(!1),N(!1),A(!1)],style:{backgroundColor:"#F5F5F5",color:"black",borderColor:"#DCDCDC"},children:"\xa0Close\xa0"}),(0,u.jsxs)(i.Q_,{type:"submit",style:{backgroundColor:"#2596be",color:"white"},disabled:M,children:[(0,u.jsx)(d.A,{icon:m.B,style:{color:"white"},size:"sm"}),"\xa0 ","Submit"]})]})]})]}),(0,u.jsxs)(i.zS,{size:"lg",visible:w,onClose:()=>[k(!1),N(!1)],backdrop:"static",children:[(0,u.jsx)(i.E4,{onClose:()=>[k(!1),N(!1)],style:{backgroundColor:"#2596be",color:"white"},children:(0,u.jsx)(i.lb,{children:"Update Machine History"})}),(0,u.jsxs)(i.qI,{className:"row g-3 needs-validation",style:{margin:"10px"},noValidate:!0,validated:S,onSubmit:async t=>{const s=t.currentTarget;if(t.preventDefault(),!0===s.checkValidity()){const s=new FormData(t.target);let a=await e.patch("/machine/machine-masters/".concat(g,"/"),s);if(1===a.data.success)alert("machine is updated"),N(!1),k(!1),O();else if(0===a.data.success)for(let e=0;e<Object.values(a.data.result).length;e++){let t=Object.values(a.data.result)[e];alert(t)}}N(!0)},children:[(0,u.jsx)(i.Tc,{children:(0,u.jsx)(i.sK,{sm:12,className:"",children:(0,u.jsxs)(i.UF,{sm:12,children:[(0,u.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["Machine Id",(0,u.jsx)("span",{className:"text-danger",children:"*"})]}),(0,u.jsx)(i.OG,{type:"text",id:"machine_id",name:"machine_id",required:!0,defaultValue:null===j||void 0===j?void 0:j.machine_id,maxLength:50}),(0,u.jsx)(i.To,{invalid:!0,children:"Please enter machine id"})]})})}),(0,u.jsxs)(i.If,{children:[(0,u.jsx)(i.Q_,{onClick:()=>[k(!1),N(!1)],style:{backgroundColor:"#F5F5F5",color:"black",borderColor:"#DCDCDC"},children:"\xa0Close\xa0"}),(0,u.jsxs)(i.Q_,{type:"submit",style:{backgroundColor:"#2596be",color:"white"},children:[(0,u.jsx)(d.A,{icon:m.B,style:{color:"white"},size:"sm"}),"\xa0Submit"]})]})]})]})]})}},84257:(e,t,s)=>{s.d(t,{B:()=>a});const a=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M199.066,456l-7.379-7.514-3.94-3.9-86.2-86.2.053-.055L17.936,274.665l97.614-97.613,83.565,83.565L398.388,61.344,496,158.958,296.729,358.229,285.469,369.6ZM146.6,358.183l52.459,52.46.1-.1.054.054,52.311-52.311,11.259-11.368L450.746,158.958,398.388,106.6,199.115,305.871,115.55,222.306,63.191,274.665l83.464,83.463Z' class='ci-primary'/>"]},3954:(e,t,s)=>{s.d(t,{I:()=>a});const a=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M252.592,496h6.816a108.122,108.122,0,0,0,108-108V332.308a177.481,177.481,0,0,0,66.37-138.531C433.778,95.751,354.027,16,256,16S78.222,95.751,78.222,193.777a177.477,177.477,0,0,0,66.371,138.531V388A108.121,108.121,0,0,0,252.592,496Zm6.816-32h-6.816a76.106,76.106,0,0,1-70.631-48H330.04A76.107,76.107,0,0,1,259.408,464Zm76-80H176.593V344H335.408ZM110.222,193.777C110.222,113.4,175.618,48,256,48s145.778,65.4,145.778,145.777a146.392,146.392,0,0,1-59.817,117.737L341.3,312H170.7l-.665-.486A146.394,146.394,0,0,1,110.222,193.777Z' class='ci-primary'/>"]},63571:()=>{}}]);