"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[5725],{55725:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var n=a(9950),o=a(1072),s=a(37017),l=a(42074),r=a(45532),c=a(7864),i=a(76058),d=(a(46411),a(44885)),m=(a(59019),a(60764),a(79988)),h=(a(4434),a(55271),a(74297)),u=a(95652),g=a(44414);const p=(0,h.A)();const w=function(){let e=(0,o.A)();const t=(0,u.A)(),{selectedColor:a}=(0,d.useColor)(),{user:h,authTokens:w}=(0,n.useContext)(r.A);let[y,x]=(0,n.useState)([]),[b,_]=(0,n.useState)(0),[D,f]=(0,n.useState)(C(new Date((new Date).setDate((new Date).getDate()-1)))),[j,v]=(0,n.useState)(C(new Date((new Date).setDate((new Date).getDate()))));(0,n.useEffect)((()=>{N()}),[]);const k=e=>{if(null==e)return"          ";const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o=t.getFullYear(),s=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return"".concat(a," - ").concat(n," - ").concat(o," ").concat(s,":").concat(l)},N=async t=>{var a=document.getElementById("datetodate1").selectedIndex;var n=document.getElementById("datetodate1").options[a].value.toString();f(n.split("=")[0]),v(n.split("=")[1]);let o=await e.post("machine/api/read_machine_customer_mapping_report_excel/",{from:C(n.split("=")[0]),to:C(n.split("=")[1])});if(1===o.data.success){let e=[],t=0;for(let a=0;a<o.data.result.length;a++){let n=o.data.result[a];console.log(n);let s={customer_name:n.name,customer_Id:n.email,mobile_no:n.customer_mobile_no,machine_assigned_date:k(n.assigned_customer_date),machine_quantity:n.assigned_count};t+=s.machine_quantity,e.push(s)}x([]),_(0),_(t),x(e)}else 0===o.data.success&&(x([]),alert(o.data.message))};function C(e){if(null!=e){var t=new Date(e),a=""+(t.getMonth()+1),n=""+t.getDate(),o=t.getFullYear();return a.length<2&&(a="0"+a),n.length<2&&(n="0"+n),[o,a,n].join("-")}}const S={today:C(new Date)+"="+C(new Date),yesterday:C(new Date((new Date).setDate((new Date).getDate()-1)))+"="+C(new Date((new Date).setDate((new Date).getDate()-1))),week:C(new Date((new Date).setDate((new Date).getDate()-6)))+"="+C(new Date(new Date)),month:C(new Date((new Date).setDate((new Date).getDate()-29)))+"="+C(new Date(new Date)),quarterly:C(new Date((new Date).setDate((new Date).getDate()-90)))+"="+C(new Date(new Date)),yearly:C(new Date((new Date).setDate((new Date).getDate()-365)))+"="+C(new Date(new Date))};return(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"mb-3",children:[(0,g.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,g.jsx)("div",{children:(0,g.jsx)("h3",{className:"mb-0",style:{color:"#2C384A"},children:(0,g.jsx)("b",{children:"Customer Machine Report"})})})}),(0,g.jsxs)("div",{className:"input-group mt-2 mb-2",children:[(0,g.jsx)("div",{children:(0,g.jsxs)("select",{id:"datetodate1",onChange:N,style:{width:"150px",height:"25px"},children:[(0,g.jsxs)("option",{value:S.today,children:[" ","\xa0 \xa0\xa0 Today \xa0 \xa0\xa0"," "]}),(0,g.jsxs)("option",{value:S.yesterday,selected:!0,children:[" ","\xa0 \xa0\xa0 Yesterday \xa0 \xa0\xa0"," "]}),(0,g.jsxs)("option",{value:S.week,children:[" ","\xa0 \xa0\xa0Weekly \xa0 \xa0\xa0"," "]}),(0,g.jsxs)("option",{value:S.month,children:[" ","\xa0 \xa0\xa0Monthly \xa0 \xa0\xa0"," "]}),(0,g.jsxs)("option",{value:S.quarterly,children:[" ","\xa0\xa0\xa0Quarterly \xa0 \xa0\xa0"," "]}),(0,g.jsxs)("option",{value:S.yearly,children:[" ","\xa0\xa0\xa0Yearly \xa0 \xa0\xa0"," "]})]})}),"\xa0 \xa0 \xa0"," ",(0,g.jsxs)("div",{children:[" ",(0,g.jsxs)(s.Q_,{onClick:function(){const e="".concat(p,"/machine/admin_download_excel_customer/?from_date=").concat(C(D),"&to_date=").concat(C(j)),a=new Headers({"x-api-key":t,Authorization:"Bearer ".concat(null===w||void 0===w?void 0:w.access)});console.log(null===w||void 0===w?void 0:w.access,"santosh");const n=new Request(e,{method:"GET",headers:a});fetch(n).then((e=>{if(e.ok)return console.log(e),e.blob();console.error("Request failed:",e.statusText)})).then((e=>{const t=window.URL.createObjectURL(e),a=document.createElement("a");a.style.display="none",a.href=t,a.download="Customer_Report"+C(new Date)+".xlsx",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(t)})).catch((e=>{console.error("Network error:",e)}))},type:"button",className:"btn btn-default btn-sm ",style:{backgroundColor:a,color:"white"},children:["Export Excel",(0,g.jsx)(c.A,{icon:i.n,style:{color:"White"},size:"sm"})]})," ",(0,g.jsxs)(s.Q_,{onClick:function(){var e="";e='<h2 style="font-size: 16px; text-align: center; color:red">Customer Machine Report</h2>'+'<p style="font-size: 12px; text-align: center;">'.concat(D," to ").concat(j,"</p> ")+'<div class="justify-content: center"><table border="1" style="margin-left: auto;margin-right: auto;border-bottom: 1px solid #ddd; border-collapse: collapse; font-size: 14px;text-align: center; align: center; border-color: black;"><tr><th style="font-weight: bold;width:5%;text-align: center;">Sr.No.</th><th style="font-weight: bold;width:19%;text-align: center;">Customer Name</th><th style="font-weight: bold;width:19%;text-align: center;">Customer ID</th><th style="font-weight: bold;width:19%;text-align: center;">Mobile No</th><th style="font-weight: bold;width:19%;text-align: center;">Date</th><th style="font-weight: bold;width:19%;text-align: center;">Machin Quantity</th></tr>',y.map(((t,a)=>e+='<tr> \n          <td style="text-align: center;">'.concat(a+1,'</td>\n          <td style="text-align: center;">').concat(t.customer_name,'</td>\n          <td style="text-align: center;">').concat(t.customer_Id,'</td>\n          <td style="text-align: center;">').concat(t.mobile_no,'</td>\n          <td style="text-align: center;">').concat(t.machine_assigned_date,'</td>\n          <td style="text-align: center;">').concat(t.machine_quantity,"</td>\n      </tr>"))),e=(e+="</table></div>").replace(/<th/g,'<th align="left" ').replace(/<td/g,'<td align="left" ');var t=window.open("","","height=400,width=800");t.document.write(e),t.document.close(),setTimeout((function(){t.print()}),10)},type:"button",className:"btn btn-default btn-sm ",style:{backgroundColor:a,color:"white"},children:["Export pdf ",(0,g.jsx)(c.A,{icon:i.n,style:{color:"White"},size:"sm"})]})]})]}),(0,g.jsx)("div",{children:(0,g.jsx)(s.sK,{xm:{cols:12},children:(0,g.jsx)(s.UF,{xs:12,children:(0,g.jsx)(s.Pd,{activePage:1,clickableRows:!0,columns:[{key:"sr_no",label:"Sr. No.",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Name",key:"customer_name",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Email / ID",key:"customer_Id",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Mobile Number",key:"mobile_no",sorter:!1,_props:{color:"secondary",className:"fw-semibold",align:"middle"}},{label:"Machine Quantity",key:"machine_quantity",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{key:"Action",label:"Action",filter:!1,sorter:!1,_props:{color:"secondary",className:"fw-semibold"}}],columnSorter:!0,items:y,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{Action:e=>(0,g.jsx)("td",{children:(0,g.jsx)(l.N_,{to:"/superadmin/customer/reportdetail/"+"".concat(e.customer_name)+"/"+"".concat(e.machine_quantity)+"/"+"".concat(e.id),children:(0,g.jsx)(s.t7,{src:m,width:17,height:15,title:"View State"})})}),sr_no:(e,t)=>(0,g.jsx)("td",{children:t+1}),created_at:e=>(0,g.jsx)("td",{children:k(e.created_at)})},itemsPerPageOptions:[10,20,50,100],tableProps:{color:"success-color-secondary",hover:!0,border:"1.5px solid #074",responsive:!0},tableHeadProps:{color:"light",align:"middle",className:"align-middle"},tableBodyProps:{align:"middle",className:"align-middle"},tableFootProps:{color:"light",align:"middle",className:"align-middle"},itemsPerPageLabel:"Rows per page:"})})})})]})})}},76058:(e,t,a)=>{a.d(t,{n:()=>n});const n=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='367.997 338.75 271.999 434.747 271.999 17.503 239.999 17.503 239.999 434.745 144.003 338.75 121.376 361.377 256 496 390.624 361.377 367.997 338.75' class='ci-primary'/>"]}}]);