"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[459],{60459:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var o=a(9950),r=a(1072),s=a(28429),l=a(37017),c=a(42074),n=a(45532),i=a(79988),d=a(74297),m=a(76058),p=a(7864),_=a(44414);const u=function(){(0,s.Zp)();let e=(0,r.A)();const{user:t,authTokens:a}=(0,o.useContext)(n.A);let[u,h]=(0,o.useState)([]),[b,y]=(0,o.useState)([]);const[g,f]=(0,o.useState)(!1);let w=(0,d.A)();(0,o.useEffect)((()=>{k()}),[]);let k=async()=>{let t=await e.get("/machine/api/get_machine_and_qrcode_for_user/"),a=await e.get("/machine/qrcode/");if(1===t.data.success&&1===a.data.success){let e=[];for(let a=0;a<t.data.result.length;a++){let o=t.data.result[a],r={id:o.id,machine_id:o.machine_id,rqcode:o.rqcode,created_at:o.created_at,qr_code_img:o.qr_code_img,product_type:o.product_type,amount:o.amount,model_no:o.model_no,name:o.name,payment_type:o.payment_type,status:!0===o.is_active?"Active":"Inactive"};e.push(r)}let o=[];for(let t=0;t<a.data.result.length;t++){let e=a.data.result[t],r={label:e.qr_code_id,value:e.id};o.push(r)}h(e),y(o)}else if(0===t.data.success)for(let e=0;e<Object.values(t.data.result).length;e++){let a=Object.values(t.data.result)[e];alert(a)}};const x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],r=t.getFullYear(),s=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return"".concat(a," - ").concat(o," - ").concat(r," ").concat(s,":").concat(l)};return x(),(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"mb-3",children:[(0,_.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,_.jsx)("h3",{className:"mb-0",style:{color:"#2C384A"},children:"Machine Master"})}),(0,_.jsx)(l.sK,{children:(0,_.jsx)(l.UF,{xs:12,children:(0,_.jsx)(l.Pd,{activePage:1,clickableRows:!0,columns:[{key:"sr_no",label:"Sr No.",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Machine ID",key:"machine_id",_props:{color:"secondary",className:"fw-semibold"},sorter:!1},{label:"QR Code ID",key:"rqcode",_props:{color:"secondary",className:"fw-semibold"},sorter:!1},{label:"Image",key:"qr_code_img",_props:{color:"secondary",className:"fw-semibold"},sorter:!1},{label:"Product Type",key:"product_type",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Amount",key:"amount",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Model No",key:"model_no",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Capacity",key:"name",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Payment Type",key:"payment_type",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Created Date",key:"created_at",_props:{color:"secondary",className:"fw-semibold"},sorter:!1},{key:"Action",label:"Action",filter:!1,sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"80px"}}],columnSorter:!0,items:u,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{qr_code_img:e=>(0,_.jsx)("td",{children:(0,_.jsx)(l.he,{className:"smarttablecardimg",orientation:"top",src:w+e.qr_code_img})}),Action:e=>(0,_.jsxs)("td",{children:["\xa0\xa0\xa0",(0,_.jsx)(c.N_,{to:"/Machineview/"+"".concat(e.id),children:(0,_.jsx)(l.t7,{src:i,width:17,height:15,title:"View Details"})}),"\xa0 \xa0",(0,_.jsx)(c.N_,{to:"#",onClick:()=>(e=>{const t="".concat(w)+"/"+e,a=new Request(t,{method:"GET"});fetch(a).then((e=>{if(e.ok)return console.log(e),e.blob();console.error("Request failed:",e.statusText)})).then((e=>{const t=window.URL.createObjectURL(e),a=document.createElement("a");a.style.display="none",a.href=t,a.download="QR_code_Image_"+x(new Date)+".png",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(t)})).catch((e=>{console.error("Network error:",e)}))})(e.qr_code_img),children:(0,_.jsx)(p.A,{icon:m.n,style:{color:"blue"},size:"md",width:"17",title:"Download"})})]}),sr_no:(e,t)=>(0,_.jsx)("td",{children:t+1}),created_at:e=>(0,_.jsx)("td",{children:x(e.created_at)})},itemsPerPageOptions:[10,20,50,100],tableFilter:!0,tableProps:{color:"success-color-secondary",hover:!0,border:"1.5px solid #074",responsive:!0},tableHeadProps:{color:"light",align:"middle",className:"align-middle"},tableBodyProps:{align:"middle"},tableFilterLabel:"Search : ",tableFilterPlaceholder:"Enter String to Search",itemsPerPageLabel:"Rows per page:"})})})]})})}},76058:(e,t,a)=>{a.d(t,{n:()=>o});const o=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='367.997 338.75 271.999 434.747 271.999 17.503 239.999 17.503 239.999 434.745 144.003 338.75 121.376 361.377 256 496 390.624 361.377 367.997 338.75' class='ci-primary'/>"]}}]);