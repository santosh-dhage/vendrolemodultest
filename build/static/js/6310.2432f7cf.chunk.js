"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6310],{96310:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(9950),l=a(1072),i=a(28429),c=a(37017),r=a(42074),n=a(45532),o=a(79988),d=a(7864),u=a(84257),h=a(44414);const m=function(){(0,i.Zp)();let e=(0,l.A)();const{user:t,authTokens:a}=(0,s.useContext)(n.A);let[m,p]=(0,s.useState)([]),[b,x]=(0,s.useState)([]),[g,j]=(0,s.useState)();const[_,y]=(0,s.useState)(!1),[f,v]=(0,s.useState)(!1),[w,C]=(0,s.useState)(!1),[S,k]=(0,s.useState)(!1),[D,F]=(0,s.useState)([]),[N,P]=(0,s.useState)(!1);(0,s.useEffect)((()=>{A()}),[]);let A=async()=>{let t=await e.get("/machine/machine-masters/");if(1===t.data.success){let e=[];for(let a=0;a<t.data.result.length;a++){let s=t.data.result[a];e.push(s.machine_id)}x(e)}else if(0===t.data.success)for(let e=0;e<Object.values(t.data.result).length;e++){let a=Object.values(t.data.result)[e];alert(a)}};(0,s.useEffect)((()=>{O()}),[]);let O=async()=>{let t=await e.get("/machine/api/get_machine_and_qrcode_for_customer/");if(1===t.data.success){let e=[];for(let a=0;a<t.data.result.length;a++){let s=t.data.result[a],l={id:s.id,machine_id:s.machine_id,created_at:s.created_at,status:!0===s.is_active?"Active":"Inactive"};e.push(l)}p(e)}else if(0===t.data.success)for(let e=0;e<Object.values(t.data.result).length;e++){let a=Object.values(t.data.result)[e];alert(a)}};const M=async t=>{const a=t.currentTarget;if(t.preventDefault(),!0===a.checkValidity())if(null!==b&&void 0!==b&&b.includes(t.target.machine_id.value))alert("This machine_id already exists");else{const a=new FormData(t.target);a.append("status",!0);let s=await e.post("/adminapp/machine-masters/",a);if(1===s.data.success)alert("machine_id is created"),k(!1),v(!1),O(),window.location.reload();else if(0===s.data.success)for(let e=0;e<Object.values(s.data.result).length;e++){let t=Object.values(s.data.result)[e];alert(t)}}else k(!0)},T=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],l=t.getFullYear(),i=String(t.getHours()).padStart(2,"0"),c=String(t.getMinutes()).padStart(2,"0");return"".concat(a," - ").concat(s," - ").concat(l," ").concat(i,":").concat(c)};return T(),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,h.jsx)("h3",{className:"mb-0",style:{color:"#2C384A"},children:"Payment History"})}),(0,h.jsx)(c.sK,{children:(0,h.jsx)(c.UF,{xs:12,children:(0,h.jsx)(c.Pd,{activePage:1,clickableRows:!0,columns:[{key:"sr_no",label:"Sr No.",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"60px"}},{label:"Machine ID",key:"machine_id",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{label:"Created Date & Time",key:"created_at",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{key:"Action",label:"Action",filter:!1,sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}}],columnSorter:!0,items:m,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{Action:t=>(0,h.jsxs)("td",{children:["\xa0\xa0\xa0",(0,h.jsx)(r.N_,{to:"#",onClick:()=>{!0===window.confirm("Are you sure, you want to delete this country?")&&(async t=>{let a=await e.delete("/adminapp/machine-masters/".concat(t,"/"));if(1===a.data.success)alert("Country is deleted"),O();else if(0===a.data.success)for(let e=0;e<Object.values(a.data.result).length;e++){let t=Object.values(a.data.result)[e];alert(t)}})(t.id)}})," ",(0,h.jsx)(r.N_,{to:"/Paymentdetails/"+"".concat(t.machine_id),children:(0,h.jsx)(c.t7,{src:o,width:17,height:15,title:"View Details"})})]}),sr_no:(e,t)=>(0,h.jsx)("td",{children:t+1}),created_at:e=>(0,h.jsx)("td",{children:T(e.created_at)})},itemsPerPageOptions:[10,20,50,100],tableFilter:!0,tableProps:{color:"success-color-secondary",hover:!0,border:"1.5px solid #074",responsive:!0},tableHeadProps:{color:"light",align:"middle",className:"align-middle"},tableBodyProps:{align:"middle",className:"align-middle"},tableFilterLabel:"Search : ",tableFilterPlaceholder:"Enter String to Search",itemsPerPageLabel:"Rows per page:"})})})]}),(0,h.jsxs)(c.zS,{size:"lg",visible:f,onClose:()=>[v(!1),k(!1),P(!1)],backdrop:"static",children:[(0,h.jsx)(c.E4,{onClose:()=>[v(!1),k(!1),P(!1)],style:{backgroundColor:"#2596be",color:"white"},children:(0,h.jsx)(c.lb,{children:"Machine Master"})}),(0,h.jsxs)(c.qI,{className:"row g-3 needs-validation",style:{margin:"10px"},noValidate:!0,validated:S,onSubmit:e=>{e.preventDefault(),M(e),e.currentTarget.checkValidity()},children:[(0,h.jsx)(c.Tc,{children:(0,h.jsx)(c.sK,{sm:12,className:"",children:(0,h.jsxs)(c.UF,{sm:12,children:[(0,h.jsxs)(c.A6,{htmlFor:"validationDefault01",children:["Machine Id",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(c.OG,{type:"text",id:"machine_id",name:"machine_id",required:!0,maxLength:50}),(0,h.jsx)(c.To,{invalid:!0,children:"Please enter machine id"})]})})}),(0,h.jsxs)(c.If,{children:[(0,h.jsx)(c.Q_,{onClick:()=>[v(!1),k(!1),P(!1)],style:{backgroundColor:"#F5F5F5",color:"black",borderColor:"#DCDCDC"},children:"\xa0Close\xa0"}),(0,h.jsxs)(c.Q_,{type:"submit",style:{backgroundColor:"#2596be",color:"white"},disabled:N,children:[(0,h.jsx)(d.A,{icon:u.B,style:{color:"white"},size:"sm"}),"\xa0 ","Submit"]})]})]})]}),(0,h.jsxs)(c.zS,{size:"lg",visible:w,onClose:()=>[C(!1),k(!1)],backdrop:"static",children:[(0,h.jsx)(c.E4,{onClose:()=>[C(!1),k(!1)],style:{backgroundColor:"#2596be",color:"white"},children:(0,h.jsx)(c.lb,{children:"Update Machine History"})}),(0,h.jsxs)(c.qI,{className:"row g-3 needs-validation",style:{margin:"10px"},noValidate:!0,validated:S,onSubmit:async t=>{const a=t.currentTarget;if(t.preventDefault(),!0===a.checkValidity()){const a=new FormData(t.target);let s=await e.patch("/adminapp/machine-masters/".concat(_,"/"),a);if(1===s.data.success)alert("machine is updated"),k(!1),C(!1),O();else if(0===s.data.success)for(let e=0;e<Object.values(s.data.result).length;e++){let t=Object.values(s.data.result)[e];alert(t)}}k(!0)},children:[(0,h.jsx)(c.Tc,{children:(0,h.jsx)(c.sK,{sm:12,className:"",children:(0,h.jsxs)(c.UF,{sm:12,children:[(0,h.jsxs)(c.A6,{htmlFor:"validationDefault01",children:["Machine Id",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(c.OG,{type:"text",id:"machine_id",name:"machine_id",required:!0,defaultValue:null===g||void 0===g?void 0:g.machine_id,maxLength:50}),(0,h.jsx)(c.To,{invalid:!0,children:"Please enter machine id"})]})})}),(0,h.jsxs)(c.If,{children:[(0,h.jsx)(c.Q_,{onClick:()=>[C(!1),k(!1)],style:{backgroundColor:"#F5F5F5",color:"black",borderColor:"#DCDCDC"},children:"\xa0Close\xa0"}),(0,h.jsxs)(c.Q_,{type:"submit",style:{backgroundColor:"#2596be",color:"white"},children:[(0,h.jsx)(d.A,{icon:u.B,style:{color:"white"},size:"sm"}),"\xa0Submit"]})]})]})]})]})}},84257:(e,t,a)=>{a.d(t,{B:()=>s});const s=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M199.066,456l-7.379-7.514-3.94-3.9-86.2-86.2.053-.055L17.936,274.665l97.614-97.613,83.565,83.565L398.388,61.344,496,158.958,296.729,358.229,285.469,369.6ZM146.6,358.183l52.459,52.46.1-.1.054.054,52.311-52.311,11.259-11.368L450.746,158.958,398.388,106.6,199.115,305.871,115.55,222.306,63.191,274.665l83.464,83.463Z' class='ci-primary'/>"]}}]);