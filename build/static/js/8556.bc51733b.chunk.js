"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[8556],{58556:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var l=a(9950),n=a(1072),o=a(37017),s=a(45532),c=a(28429),r=a(44885),i=(a(59019),a(60764),a(7864)),d=a(76058),u=(a(4434),a(74297)),h=a(95652),p=a(44414);const _=(0,u.A)();const g=function(){let{id:e,location:t}=(0,c.g)(),a=(0,n.A)();const u=(0,c.Zp)(),g=(0,h.A)(),{selectedColor:f}=(0,r.useColor)(),{user:y,authTokens:w}=(0,l.useContext)(s.A);let[b,m]=(0,l.useState)([]),[D,x]=(0,l.useState)(new Date((new Date).setDate((new Date).getDate()-1))),[k,j]=(0,l.useState)(new Date((new Date).setDate((new Date).getDate()-1)));(0,l.useEffect)((()=>{v()}),[]);let v=async()=>{let t=await a.get("user_stock_capacity_equal_count_per_day_by_id/".concat(e,"/"));if(console.log(t),1===t.data.success){let e=[];for(let a=0;a<t.data.result.length;a++){let l=t.data.result[a];console.log(l);let n={refill_count:l.count_capacity_equals_stock,refill_date:l.date,stock_before_date:l.stock_before_date,refill_quantity:l.refill_quantity};e.sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at))),e.push(n)}m([]),m(e)}else if(0===t.data.success)for(let e=0;e<Object.values(t.data.result).length;e++){let a=Object.values(t.data.result)[e];alert(a)}};const R=e=>{if(null==e)return"          ";const t=new Date(e),a=String(t.getDate()).padStart(2,"0"),l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],n=t.getFullYear(),o=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0");return"".concat(a," - ").concat(l," - ").concat(n," ").concat(o,":").concat(s)},C={today:N(new Date)+"="+N(new Date),yesterday:N(new Date((new Date).setDate((new Date).getDate()-1)))+"="+N(new Date((new Date).setDate((new Date).getDate()-1))),week:N(new Date((new Date).setDate((new Date).getDate()-6)))+"="+N(new Date(new Date)),month:N(new Date((new Date).setDate((new Date).getDate()-29)))+"="+N(new Date(new Date)),quarterly:N(new Date((new Date).setDate((new Date).getDate()-90)))+"="+N(new Date(new Date)),yearly:N(new Date((new Date).setDate((new Date).getDate()-365)))+"="+N(new Date(new Date))};function N(e){if(null!=e){var t=new Date(e),a=""+(t.getMonth()+1),l=""+t.getDate(),n=t.getFullYear();return a.length<2&&(a="0"+a),l.length<2&&(l="0"+l),[n,a,l].join("-")}}return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{className:"mt-2 mb-1 d-flex justify-content-start",children:(0,p.jsx)(o.Q_,{style:{backgroundColor:f},onClick:()=>u(-1),children:"Back"})}),(0,p.jsx)("div",{children:(0,p.jsxs)("h4",{className:"mb-4",style:{color:"#2C384A"},children:["Machine ID : ",e]})}),(0,p.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-1",children:(0,p.jsxs)("h4",{className:"mb-4",style:{color:"#2C384A"},children:["Machine Location : ",t]})}),(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsxs)("div",{className:"input-group mt-2 mb-2",children:[(0,p.jsx)("div",{children:(0,p.jsxs)("select",{id:"datetodate1",onChange:async t=>{var l=document.getElementById("datetodate1").selectedIndex;var n=document.getElementById("datetodate1").options[l].value.toString();x(n.split("=")[0]),j(n.split("=")[1]);let o=await a.get("/post_user_stock_capacity_equal_count/".concat(e,"/?from_date=").concat(N(n.split("=")[0]),"&to_date=").concat(N(n.split("=")[1])));if(1===o.data.success){let e=[];for(let t=0;t<o.data.result.length;t++){let a=o.data.result[t];console.log(a);let l={refill_count:a.count_capacity_equals_stock,refill_date:a.date,refill_quantity:a.refill_quantity,stock_before_date:a.stock_before_date};e.sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at))),e.push(l)}m([]),m(e)}else 0===o.data.success&&(m([]),alert(o.data.message))},style:{width:"150px",height:"25px"},children:[(0,p.jsxs)("option",{value:C.today,children:[" ","\xa0\xa0 \xa0 \xa0\xa0 Today \xa0 \xa0\xa0"," "]}),(0,p.jsxs)("option",{value:C.yesterday,selected:!0,children:[" ","\xa0\xa0 \xa0 \xa0\xa0 Yesterday \xa0 \xa0\xa0"," "]}),(0,p.jsxs)("option",{value:C.week,children:[" ","\xa0\xa0 \xa0 \xa0\xa0Weekly\xa0 \xa0\xa0"," "]}),(0,p.jsxs)("option",{value:C.month,children:[" ","\xa0\xa0 \xa0 \xa0\xa0Monthly \xa0 \xa0\xa0"," "]}),(0,p.jsxs)("option",{value:C.quarterly,children:[" ","\xa0\xa0 \xa0 \xa0\xa0Quarterly \xa0 \xa0\xa0"," "]}),(0,p.jsxs)("option",{value:C.yearly,children:[" ","\xa0\xa0 \xa0 \xa0\xa0Yearly \xa0 \xa0\xa0"," "]})]})}),"\xa0 \xa0 \xa0"," ",(0,p.jsxs)("div",{children:[" ",(0,p.jsxs)(o.Q_,{onClick:function(){const e="".concat(_,"/machine/get_stock_by_machine_user_role_refill_excel_download/?from_date=").concat(N(D),"&to_date=").concat(N(k)),t=new Headers({"x-api-key":g,Authorization:"Bearer ".concat(null===w||void 0===w?void 0:w.access)}),a=new Request(e,{method:"GET",headers:t});fetch(a).then((e=>{if(e.ok)return console.log(e),e.blob();console.error("Request failed:",e.statusText)})).then((e=>{const t=window.URL.createObjectURL(e),a=document.createElement("a");a.style.display="none",a.href=t,a.download="Refill_Report"+N(new Date)+".xlsx",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(t)})).catch((e=>{console.error("Network error:",e)}))},type:"button",className:"btn btn-default btn-sm ",style:{backgroundColor:f,color:"white"},children:["Export Excel",(0,p.jsx)(i.A,{icon:d.n,style:{color:"White"},size:"sm"})]})," ",(0,p.jsxs)(o.Q_,{onClick:function(){var a="";a='<h2 style="font-size: 16px; text-align: center; color:red">Machine Refill Report</h2>'+'<p style="font-size: 12px; text-align: center;">'.concat(D," to ").concat(k,"</p> ")+"</br>Machine ID : &nbsp;&nbsp;  ".concat(e,"</br>")+"Location &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;: &nbsp;&nbsp;  ".concat(t,"</br>")+'<table border="1" style="margin-left: auto;margin-right: auto;border-bottom: 1px solid #ddd; border-collapse: collapse; font-size: 14px;text-align: center; align: center; "><tr><th style="font-weight: bold;width:5%;text-align: center;">Sr.No.</th><th style="font-weight: bold;width:19%;text-align: center;">Before Refill Stock</th><th style="font-weight: bold;width:19%;text-align: center;">Refill Quantity</th><th style="font-weight: bold;width:19%;text-align: center;">Refill Count</th><th style="font-weight: bold;width:19%;text-align: center;">Refill Date</th></tr>',b.map(((e,t)=>a+='<tr> \n          <td style="text-align: center;">'.concat(t+1,'</td>\n          <td style="text-align: center;">').concat(e.stock_before_date,'</td>\n          <td style="text-align: center;">').concat(e.refill_quantity,'</td>\n          <td style="text-align: center;">').concat(e.refill_count,'</td>\n          <td style="text-align: center;">').concat(e.refill_date,"</td>\n         \n      </tr>"))),a=(a+="</table>").replace(/<th/g,'<th align="left" ').replace(/<td/g,'<td align="left" ');var l=window.open("","","height=400,width=800");l.document.write(a),l.document.close(),setTimeout((function(){l.print()}),10)},type:"button",className:"btn btn-default btn-sm ",style:{backgroundColor:f,color:"white"},children:["Export pdf",(0,p.jsx)(i.A,{icon:d.n,style:{color:"White"},size:"sm"})]})]})]}),(0,p.jsx)("div",{children:(0,p.jsx)(o.sK,{xm:{cols:12},children:(0,p.jsx)(o.UF,{xs:12,children:(0,p.jsx)(o.Pd,{activePage:1,clickableRows:!0,columns:[{key:"sr_no",label:"Sr. No.",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Before Refill Stock",key:"stock_before_date",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Refill Quantity",key:"refill_quantity",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Refill Count",key:"refill_count",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}},{label:"Refill Date",key:"refill_date",sorter:!1,_props:{color:"secondary",className:"fw-semibold"}}],items:b,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{sr_no:(e,t)=>(0,p.jsx)("td",{children:t+1}),created_at:e=>(0,p.jsx)("td",{children:R(e.created_at)})},itemsPerPageOptions:[10,20,50,100],tableProps:{color:"success-color-secondary",hover:!0,border:"1.5px solid #074",responsive:!0},tableHeadProps:{color:"light",align:"middle",className:"align-middle"},tableBodyProps:{align:"middle",className:"align-middle"},itemsPerPageLabel:"Rows per page:"})})})})]})]})}},76058:(e,t,a)=>{a.d(t,{n:()=>l});const l=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='367.997 338.75 271.999 434.747 271.999 17.503 239.999 17.503 239.999 434.745 144.003 338.75 121.376 361.377 256 496 390.624 361.377 367.997 338.75' class='ci-primary'/>"]},4434:()=>{}}]);