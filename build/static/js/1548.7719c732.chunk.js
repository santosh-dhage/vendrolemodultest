(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[1548],{61548:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var r=n(9950),o=n(1072),a=n(37017),l=n(45532),s=n(7864),i=n(76058),c=(n(46411),n(42019),n(59019),n(60764),n(4434),n(74297)),u=n(95652),p=n(44414);const d=(0,c.A)();const f=function(){let e=(0,o.A)();const t=(0,u.A)(),{user:n,authTokens:c}=(0,r.useContext)(l.A);let[f,y]=(0,r.useState)([]),[h,_]=(0,r.useState)(new Date((new Date).setDate((new Date).getDate()-1))),[m,b]=(0,r.useState)(new Date((new Date).setDate((new Date).getDate()))),[g,v]=(0,r.useState)(0),[w,k]=(0,r.useState)(0),[D,j]=(0,r.useState)(0),[x,C]=(0,r.useState)(0),[O,S]=(0,r.useState)(0),[P,R]=(0,r.useState)(0);(0,r.useEffect)((()=>{A()}),[]);let A=async()=>{let t=await e.get("get_mis_customer_user_report/");if(console.log(t),1===t.data.success){let e=[];for(let n=0;n<t.data.result.length;n++){let r=t.data.result[n];console.log(r);let o={user_id:r.user_id,name:r.name,mail:r.email,mobile:r.user_mobile_no,machine_id:r.machine_id,model_no:r.model_no,location:r.location,status:"",count:"",product_type:"",recent_refill_date:r.date,quantity_refilled:"",recent_cash_collection_date:"",recent_amount_collected:r.amount};e.sort(((e,t)=>new Date(t.created_at)-new Date(e.created_at))),e.push(o)}y(e),console.log(f)}else if(0===t.data.success)for(let e=0;e<Object.values(t.data.result).length;e++){let n=Object.values(t.data.result)[e];alert(n)}};const F=e=>{if(null==e)return"          ";const t=new Date(e),n=String(t.getDate()).padStart(2,"0"),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],o=t.getFullYear(),a=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return"".concat(n," - ").concat(r," - ").concat(o," ").concat(a,":").concat(l)};function E(e){if(null!=e){var t=new Date(e),n=""+(t.getMonth()+1),r=""+t.getDate(),o=t.getFullYear();return n.length<2&&(n="0"+n),r.length<2&&(r="0"+r),[o,n,r].join("-")}}const U={today:E(new Date)+"="+E(new Date),yesterday:E(new Date((new Date).setDate((new Date).getDate()-1)))+"="+E(new Date((new Date).setDate((new Date).getDate()-1))),week:E(new Date((new Date).setDate((new Date).getDate()-6)))+"="+E(new Date(new Date)),month:E(new Date((new Date).setDate((new Date).getDate()-29)))+"="+E(new Date(new Date)),quarterly:E(new Date((new Date).setDate((new Date).getDate()-90)))+"="+E(new Date(new Date)),yearly:E(new Date((new Date).setDate((new Date).getDate()-365)))+"="+E(new Date(new Date))};return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,p.jsx)("div",{children:(0,p.jsx)("h3",{className:"mb-0",style:{color:"#2C384A"},children:"User MIS Report"})})," ",(0,p.jsx)("div",{children:(0,p.jsxs)(a.Q_,{type:"button",className:"btn btn-default btn-sm ",style:{backgroundColor:"#2A409A",color:"white",height:"28px"},onClick:async()=>{const e="".concat(d,"/get_customer_role_for_user_download_excel_report/").concat(c.user.id,"/?from_date=").concat(E(h),"&to_date=").concat(E(m));console.log(e);const n=new Headers({"x-api-key":t});console.log(t);const r=new Request(e,{method:"GET",headers:n});fetch(r).then((e=>{if(e.ok)return console.log(e),e.blob();console.error("Request failed:",e.statusText)})).then((e=>{const t=window.URL.createObjectURL(e),n=document.createElement("a");n.style.display="none",n.href=t,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(t)})).catch((e=>{console.error("Network error:",e)}))},children:["Export Excel",(0,p.jsx)(s.A,{icon:i.n,style:{color:"White"},size:"sm"})]})})]}),(0,p.jsxs)("div",{className:"input-group mt-2 mb-2",children:["\xa0 \xa0 \xa0"," ",(0,p.jsx)("div",{children:(0,p.jsxs)("select",{id:"datetodate1",style:{width:"150px",height:"25px"},children:[(0,p.jsx)("option",{disabled:!0,selected:!0,children:"please select the dates "}),(0,p.jsxs)("option",{value:U.today,children:[" ","\xa0\xa0  \xa0 \xa0\xa0 Today \xa0 \xa0\xa0"," "]}),(0,p.jsxs)("option",{value:U.yesterday,children:[" ","\xa0\xa0 \xa0 \xa0\xa0 Yesterday \xa0 \xa0\xa0"," "]}),(0,p.jsxs)("option",{value:U.week,children:[" ","\xa0\xa0 \xa0 \xa0\xa0Weekly\xa0 \xa0\xa0"," "]}),(0,p.jsxs)("option",{value:U.month,children:[" ","\xa0\xa0 \xa0 \xa0\xa0Monthly \xa0 \xa0\xa0"," "]}),(0,p.jsxs)("option",{value:U.quarterly,children:[" ","\xa0\xa0 \xa0 \xa0\xa0Quarterly \xa0 \xa0\xa0"," "]}),(0,p.jsxs)("option",{value:U.yearly,children:[" ","\xa0\xa0 \xa0 \xa0\xa0Yearly \xa0 \xa0\xa0"," "]})]})}),"\xa0 \xa0 \xa0"," ",(0,p.jsxs)("div",{children:[" ",(0,p.jsx)(a.Q_,{type:"button",className:"btn btn-default btn-sm ",style:{backgroundColor:"#2A409A",color:"white"},onClick:function(e){var t=document.getElementById("datetodate1").selectedIndex,n=document.getElementById("datetodate1").options[t].value.toString();_(n.split("=")[0]),b(n.split("=")[1])},children:"submit"})]})]}),(0,p.jsx)("div",{children:(0,p.jsx)(a.sK,{xm:{cols:12},children:(0,p.jsx)(a.UF,{xs:12,children:(0,p.jsx)(a.Pd,{activePage:1,clickableRows:!0,columns:[{group:"TENDRYL",_props:{colSpan:5,color:"green"},children:[{key:"sr_no",label:"Sr. No.",_props:{scope:"col"},sorter:!1,_style:{minWidth:"40px"}},{key:"user_id",label:"User ID",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}},{key:"name",label:"Name",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}},{key:"mobile",label:"Mobile",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}},{key:"mail",label:"Email",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}}]},{group:"MACHINE",_props:{colSpan:5,color:"red"},children:[{key:"machine_id",label:"Machine Id",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}},{key:"model_no",label:"Model No",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}},{key:"location",label:"Location",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}},{key:"status",label:"Current status ON/OFF",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}},{key:"count",label:"Current Inventory Count",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}}]},{group:"PRODUCT",_props:{colSpan:5,color:"yellow"},children:[{key:"product_type",label:"Product Type",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}},{key:"recent_refill_date",lable:"Recent Refill Date",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}},{key:"quantity_refilled",label:"Quantity Refilled",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}},{key:"recent_cash_collection_date",label:"Recent Cash Collection Date",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}},{key:"recent_amount_collected",label:"Recent Amount Collected",_props:{scope:"col"},sorter:!1,_style:{minWidth:"100px"}}]}],columnSorter:!0,items:f,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{sr_no:(e,t)=>(0,p.jsx)("td",{children:t+1}),created_at:e=>(0,p.jsx)("td",{children:F(e.created_at)})},itemsPerPageOptions:[10,20,50,100],tableProps:{color:"success-color-secondary",hover:!0,bordered:!0,responsive:!0},tableHeadProps:{color:"light",align:"middle",className:"align-middle"},tableBodyProps:{align:"middle",className:"align-middle"},itemsPerPageLabel:"Rows per page:"})})})})]})})}},76058:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});const r=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='367.997 338.75 271.999 434.747 271.999 17.503 239.999 17.503 239.999 434.745 144.003 338.75 121.376 361.377 256 496 390.624 361.377 367.997 338.75' class='ci-primary'/>"]},46411:(e,t,n)=>{e.exports=n(795)},91078:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(9950),l=(r=a)&&r.__esModule?r:{default:r},s=n(87924),i=n(8010);var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"buildURI",value:function(){return s.buildURI.apply(void 0,arguments)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=e.headers,r=e.separator,o=e.enclosingCharacter,a=e.uFEFF,l=e.target,s=e.specs,i=e.replace;this.state.page=window.open(this.buildURI(t,a,n,r,o),l,s,i)}},{key:"getWindow",value:function(){return this.state.page}},{key:"render",value:function(){return null}}]),t}(l.default.Component);c.defaultProps=Object.assign(i.defaultProps,{target:"_blank"}),c.propTypes=i.propTypes,t.default=c},49462:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(9950),s=(r=l)&&r.__esModule?r:{default:r},i=n(87924),c=n(8010);var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.buildURI=n.buildURI.bind(n),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),a(t,[{key:"buildURI",value:function(){return i.buildURI.apply(void 0,arguments)}},{key:"handleLegacy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.navigator.msSaveOrOpenBlob){e.preventDefault();var n=this.props,r=n.data,o=n.headers,a=n.separator,l=n.filename,s=n.enclosingCharacter,c=n.uFEFF,u=t&&"function"===typeof r?r():r,p=new Blob([c?"\ufeff":"",(0,i.toCSV)(u,o,a,s)]);return window.navigator.msSaveBlob(p,l),!1}}},{key:"handleAsyncClick",value:function(e){var t=this;this.props.onClick(e,(function(n){!1!==n?t.handleLegacy(e,!0):e.preventDefault()}))}},{key:"handleSyncClick",value:function(e){!1===this.props.onClick(e)?e.preventDefault():this.handleLegacy(e)}},{key:"handleClick",value:function(){var e=this;return function(t){if("function"===typeof e.props.onClick)return e.props.asyncOnClick?e.handleAsyncClick(t):e.handleSyncClick(t);e.handleLegacy(t)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.headers,a=t.separator,l=t.filename,i=t.uFEFF,c=t.children,u=(t.onClick,t.asyncOnClick,t.enclosingCharacter),p=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(t,["data","headers","separator","filename","uFEFF","children","onClick","asyncOnClick","enclosingCharacter"]),d="undefined"===typeof window?"":this.buildURI(n,i,r,a,u);return s.default.createElement("a",o({download:l},p,{ref:function(t){return e.link=t},target:"_self",href:d,onClick:this.handleClick()}),c)}}]),t}(s.default.Component);u.defaultProps=c.defaultProps,u.propTypes=c.propTypes,t.default=u},87924:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var o=t.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},a=t.isJsons=function(e){return Array.isArray(e)&&e.every((function(e){return"object"===("undefined"===typeof e?"undefined":n(e))&&!(e instanceof Array)}))},l=t.isArrays=function(e){return Array.isArray(e)&&e.every((function(e){return Array.isArray(e)}))},s=t.jsonsHeaders=function(e){return Array.from(e.map((function(e){return Object.keys(e)})).reduce((function(e,t){return new Set([].concat(r(e),r(t)))}),[]))},i=t.jsons2arrays=function(e,t){var n=t=t||s(e),o=t;a(t)&&(n=t.map((function(e){return e.label})),o=t.map((function(e){return e.key})));var l=e.map((function(e){return o.map((function(t){return c(t,e)}))}));return[n].concat(r(l))},c=t.getHeaderValue=function(e,t){var n=e.replace(/\[([^\]]+)]/g,".$1").split(".").reduce((function(e,t,n,r){var o=e[t];if(void 0!==o&&null!==o)return o;r.splice(1)}),t);return void 0===n?e in t?t[e]:"":n},u=t.elementOrEmpty=function(e){return"undefined"===typeof e||null===e?"":e},p=t.joiner=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'"';return e.filter((function(e){return e})).map((function(e){return e.map((function(e){return u(e)})).map((function(e){return""+n+e+n})).join(t)})).join("\n")},d=t.arrays2csv=function(e,t,n,o){return p(t?[t].concat(r(e)):e,n,o)},f=t.jsons2csv=function(e,t,n,r){return p(i(e,t),n,r)},y=t.string2csv=function(e,t,n,r){return t?t.join(n)+"\n"+e:e.replace(/"/g,'""')},h=t.toCSV=function(e,t,n,r){if(a(e))return f(e,t,n,r);if(l(e))return d(e,t,n,r);if("string"===typeof e)return y(e,t,n);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')};t.buildURI=function(e,t,n,r,a){var l=h(e,n,r,a),s=o()?"application/csv":"text/csv",i=new Blob([t?"\ufeff":"",l],{type:s}),c="data:"+s+";charset=utf-8,"+(t?"\ufeff":"")+l,u=window.URL||window.webkitURL;return"undefined"===typeof u.createObjectURL?c:u.createObjectURL(i)}},795:(e,t,n)=>{"use strict";t.CSVLink=void 0;var r=a(n(91078)),o=a(n(49462));function a(e){return e&&e.__esModule?e:{default:e}}r.default,t.CSVLink=o.default},8010:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PropsNotForwarded=t.defaultProps=t.propTypes=void 0;var r,o=n(9950),a=((r=o)&&r.__esModule,n(11942));t.propTypes={data:(0,a.oneOfType)([a.string,a.array,a.func]).isRequired,headers:a.array,target:a.string,separator:a.string,filename:a.string,uFEFF:a.bool,onClick:a.func,asyncOnClick:a.bool,enclosingCharacter:a.string},t.defaultProps={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},t.PropsNotForwarded=["data","headers"]},4434:()=>{},42019:()=>{}}]);