"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9652],{39652:(e,a,t)=>{t.r(a),t.d(a,{default:()=>m});var s=t(9950),n=t(1072),r=t(37017),o=t(45532),l=t(46411),c=t(59019),d=(t(60764),t(72348)),i=t.n(d),_=(t(4434),t(44414));const m=function(){let e=(0,n.A)();const{user:a,authTokens:t}=(0,s.useContext)(o.A);let[d,m]=(0,s.useState)([]),[h,D]=(0,s.useState)(new Date),[p,u]=(0,s.useState)(new Date);const[y,b]=(0,s.useState)([{startDate:new Date,endDate:null,key:"selection"}]);(0,s.useEffect)((()=>{g()}),[]);let g=async()=>{let a=await e.get("/machine/api/get_generate_report_for_all_record/");if(console.log(a),1===a.data.success){let e=[];for(let t=0;t<a.data.result.length;t++){let s=a.data.result[t];console.log(s);let n={Machine_Id:s.machine_id,Customer_Id:s.email,Customer_Created_Date:w(s.assigned_customer_date),User_Id:s.user_email,User_Created_Date:w(s.assigned_user_date),Machine_Assigned_Date:w(s.assigned_customer_date),Machine_Created_Date:"Machine-created-date-Dummy",Machine_QR_Assigned_Date:" machine-qr assigned date",QR_coin:"QR/coin",Transaction_Date:"a.assigned_user_date",Capacity_Stock:"25/25",Merchant_Id:"maerchantid1",Merchant_Name:"merchant namedummy",Store_Id:"stored id",Store_Name:"storenamedummy",QR_Id:"qrdummy"};e.sort(((e,a)=>new Date(a.created_at)-new Date(e.created_at))),e.push(n)}m([]),m(e)}else if(0===a.data.success)for(let e=0;e<Object.values(a.data.result).length;e++){let t=Object.values(a.data.result)[e];alert(t)}};new Date,new Date,new Date((new Date).setDate((new Date).getDate()-1)),new Date((new Date).setDate((new Date).getDate()-1)),new Date((new Date).setDate((new Date).getDate()-6)),new Date(new Date),new Date((new Date).setDate((new Date).getDate()-29)),new Date(new Date),new Date((new Date).setDate(1)),new Date((new Date).getFullYear(),(new Date).getMonth()+1,0),new Date((new Date).getFullYear(),(new Date).getMonth()-1,1),new Date((new Date).getFullYear(),(new Date).getMonth(),0);const w=e=>{if(null==e)return"          ";const a=new Date(e),t=String(a.getDate()).padStart(2,"0"),s=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][a.getMonth()],n=a.getFullYear(),r=String(a.getHours()).padStart(2,"0"),o=String(a.getMinutes()).padStart(2,"0");return"".concat(t," - ").concat(s," - ").concat(n," ").concat(r,":").concat(o)};return(0,_.jsx)(_.Fragment,{children:(0,_.jsxs)("div",{className:"mb-3",children:[(0,_.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,_.jsx)("div",{children:(0,_.jsx)("h3",{className:"mb-0",style:{color:"#2C384A"},children:"Machine Report"})})," ",(0,_.jsxs)("div",{children:[(0,_.jsx)(r.Q_,{onClick:()=>(()=>{const e=new c.default("portrait","pt","A2");e.setFontSize(15);let a={startY:50,head:[["Sr No","Machine Id","Customer Id","Customer Created Date","User Id","User Created Date","Machine Assigned Date","Machine Created Date","Machine QR Assigned Date","QR coin","Transaction Date","Capacity Stock","Merchant Id","Merchant Name","Store Id","Store Name","QR ID"]],body:null===d||void 0===d?void 0:d.map(((e,a)=>[a+1,e.Machine_Id,e.Customer_Id,e.Customer_Created_Date,e.User_Id,e.User_Created_Date,e.Machine_Assigned_Date,e.Machine_Created_Date,e.Machine_QR_Assigned_Date,e.QR_coin,e.Transaction_Date,e.Capacity_Stock,e.Merchant_Id,e.Merchant_Name,e.Store_Id,e.Store_Name,e.QR_Id]))};e.text("          Report",0,40),e.autoTable(a),e.save("Vending_Machin_Report.pdf")})(),className:"mt-2",style:{backgroundColor:"#2596be",color:"white",border:"none",fontWeight:"500",margin:"10px"},children:"Export pdf"}),(0,_.jsx)(l.CSVLink,{data:d,headers:[{lable:"Machine Id",key:"Machine_Id"},{lable:"Customer Id",key:"Customer_Id"},{lable:"Customer Created Date",key:"Customer_Created_Date"},{lable:"User d",key:"User_Id"},{lable:"User Created Date",key:"User_Created_Date"},{lable:"Machine Assigned Date",key:"Machine_Assigned_ Dated"},{lable:"Machine Created Date",key:"Machine_Created_Date"},{lable:"Machine QR Assigned Date",key:"Machine_QR_Assigned_Date"},{lable:"QR coin",key:"QR_coin"},{lable:"Transaction Date",key:"Transaction_Date"},{lable:"Capacity Stock",key:"Capacity_Stock"},{lable:"Merchant Id",key:"Merchant_Id"},{lable:"Merchant Name",key:"Merchant_Name"},{lable:"Store Id",key:"Store_Id"},{lable:"Store Name",key:"Store_Name"},{lable:"QR ID",key:"QR_ID"}],filename:"Vending_Machine_Report",className:"btn btn-primary btn-sm",style:{backgroundColor:"#2596be",border:"none"},children:"Export Excel"})]})]}),(0,_.jsxs)("div",{className:"input-group mt-2 mb-2",children:[(0,_.jsx)(i(),{showIcon:!0,selected:h,onChange:e=>D(e),selectsStart:!0,startDate:h,endDate:p,className:"form-control"}),"  \xa0",(0,_.jsx)("div",{className:"input-group-addon",children:" to "}),"  \xa0",(0,_.jsx)(i(),{showIcon:!0,selected:p,onChange:e=>u(e),selectsEnd:!0,startDate:h,endDate:p,minDate:h,className:"form-control"}),"\xa0 \xa0 \xa0 ",(0,_.jsxs)("div",{children:[" ",(0,_.jsx)(r.Q_,{onClick:async a=>{let t=await e.post("machine/api/read_machine_user_mapping_report_excel/",{from:h,to:p});if(1===t.data.success){let e=[];for(let a=0;a<t.data.result.length;a++){let s=t.data.result[a];console.log(s);let n={Machine_Id:s.machine_id,Customer_Id:s.email,Customer_Created_Date:w(s.assigned_customer_date),User_Id:s.user_email,User_Created_Date:w(s.assigned_user_date),Machine_Assigned_Date:w(s.assigned_customer_date),Machine_Created_Date:"Machine-created-date-Dummy",Machine_QR_Assigned_Date:" machine-qr assigned date",QR_coin:"QR/coin",Transaction_Date:"a.assigned_user_date",Capacity_Stock:"25/25",Merchant_Id:"maerchantid1",Merchant_Name:"merchant namedummy",Store_Id:"stored id",Store_Name:"storenamedummy",QR_Id:"qrdummy"};e.sort(((e,a)=>new Date(a.created_at)-new Date(e.created_at))),e.push(n)}m([]),m(e)}else if(0===t.data.success){console.log("inside else part");for(let e=0;e<Object.values(t.data.result).length;e++){let a=Object.values(t.data.result)[e];alert(a)}}},children:"submit"})]})]}),(0,_.jsx)("div",{children:(0,_.jsx)(r.sK,{xm:{cols:12},children:(0,_.jsx)(r.UF,{xs:12,children:(0,_.jsx)(r.E$,{className:"mb-1 shadow bg-body rounded",children:(0,_.jsx)(r.W6,{children:(0,_.jsx)(r.Pd,{activePage:1,cleaner:!0,clickableRows:!0,columns:[{key:"sr_no",label:"Sr. No.",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"75px"}},{label:"Machine ID",key:"Machine_Id",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"}},{label:"Customer ID",key:"Customer_Id",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"}},{label:"Customer Created Date",key:"Customer_Created_Date",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"180px"}},{label:"User ID",key:"User_Id",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"}},{label:"User Created Date",key:"User_Created_Date",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"180px"}},{label:"Machine Assigned Date",key:"Machine_Assigned_Date",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"180px"}},{label:"Machine Created Date",key:"Machine_Created_Date",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"180px"}},{label:"Machine QR Assigned Date",key:"Machine_QR_Assigned_Date",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"190px"}},{label:"QR/Coin",key:"QR_coin",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"}},{label:"Transaction Date",key:"Transaction_Date",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"}},{label:"Capacity/Stock",key:"Capacity_Stock",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"}},{label:"Merchant ID",key:"Merchant_Id",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"}},{label:"Merchant Name",key:"Merchant_Name",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"}},{label:"Store ID",key:"Store_Id",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"}},{label:"Store Name",key:"Store_Name",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"}},{label:"QR ID",key:"QR_Id",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"}}],columnSorter:!0,items:d,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{sr_no:(e,a)=>(0,_.jsx)("td",{children:a+1}),created_at:e=>(0,_.jsx)("td",{children:w(e.created_at)})},itemsPerPageOptions:[10,20,50,100],tableFilter:!0,tableProps:{color:"success-color-secondary",hover:!0,border:"1.5px solid #074",responsive:!0},itemsPerPageLabel:"Rows per page:"})})})})})})]})})}}}]);