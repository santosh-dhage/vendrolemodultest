"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6443],{76443:(e,s,t)=>{t.r(s),t.d(s,{default:()=>_});var l=t(9950),a=t(1072),r=t(28429),i=t(37017),d=t(44885),o=t(42074),n=t(45532),c=t(74297),m=t(79988),h=t(7864),u=t(27760),x=t(76058),j=t(84257),p=t(44414);const _=function(){(0,r.Zp)();let e=(0,a.A)();const{user:s,authTokens:t}=(0,l.useContext)(n.A);let[_,g]=(0,l.useState)([]),[b,v]=(0,l.useState)([]),[f,q]=(0,l.useState)();const[y,C]=(0,l.useState)(!1),[F,w]=(0,l.useState)(!1),[N,k]=(0,l.useState)(!1),[D,S]=(0,l.useState)(!1),[R,Q]=(0,l.useState)(!1),[A,P]=(0,l.useState)([]),{selectedColor:I}=(0,d.useColor)(),[T,U]=(0,l.useState)(!1);let O=(0,c.A)();const L=e=>{const s=e.target.files[0];s&&!(e=>{const s=e.name.split(".").pop().toLowerCase();return["png","jpg"].includes(s)})(s)&&(alert("Please select a PNG or JPG file."),e.target.value="")};(0,l.useEffect)((()=>{V()}),[]);let V=async()=>{let s=await e.get("/machine/qrcode/");if(1===s.data.success){let e=[];for(let t=0;t<s.data.result.length;t++){let l=s.data.result[t];e.push(l.qr_code_id)}v(e)}else if(0===s.data.success)for(let e=0;e<Object.values(s.data.result).length;e++){let t=Object.values(s.data.result)[e];alert(t)}};(0,l.useEffect)((()=>{G()}),[]);let G=async()=>{let s=await e.get("/machine/qrcode/");if(1===s.data.success){let e=[];for(let t=0;t<s.data.result.length;t++){let l=s.data.result[t],a={id:l.id,qr:l.qr,qr_code_id:l.qr_code_id,created_at:l.created_at,created_by:l.created_by,qr_store_name:l.qr_store_name,qr_store_id:l.qr_store_id,qr_code_img:l.qr,is_active:!0===l.is_active?"Active":"Inactive"};e.push(a)}g(e)}else if(0===s.data.success)for(let e=0;e<Object.values(s.data.result).length;e++){let t=Object.values(s.data.result)[e];alert(t)}};const z=async s=>{const t=s.currentTarget;if(s.preventDefault(),!0===t.checkValidity())if(null!==b&&void 0!==b&&b.includes(s.target.qr_code_id.value))alert("This QR code id  already exists");else{const t=new FormData(s.target);t.append("is_active",!0);let l=await e.post("/machine/qrcode/",t);if(1===l.data.success)alert("QR code id  is created"),Q(!1),w(!1),G(),window.location.reload();else if(0===l.data.success)for(let e=0;e<Object.values(l.data.result).length;e++){let s=Object.values(l.data.result)[e];alert(s)}}else Q(!0)},K=e=>{const s=new Date(e),t=String(s.getDate()).padStart(2,"0"),l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][s.getMonth()],a=s.getFullYear(),r=String(s.getHours()).padStart(2,"0"),i=String(s.getMinutes()).padStart(2,"0");return"".concat(t," - ").concat(l," - ").concat(a," ").concat(r,":").concat(i)};let M=[{label:"Active",value:!0},{label:"Inactive",value:!1}],E=e=>{let s=[];for(let t=0;t<M.length;t++){let l=M[t];e==l.label&&s.push(l)}for(let t=0;t<M.length;t++){let l=M[t];e!=l.label&&s.push(l)}P(s)};return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("div",{className:"mb-3",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,p.jsx)("h3",{className:"mb-0",style:{color:"#2C384A"},children:"QR Code"}),(0,p.jsx)(i.Q_,{onClick:()=>{w(!F)},className:"mt-2",style:{backgroundColor:I,color:"white",border:"0px"},children:"Add QR Code"})]}),(0,p.jsx)(i.sK,{children:(0,p.jsx)(i.UF,{xs:12,children:(0,p.jsx)(i.Pd,{activePage:1,clickableRows:!0,columns:[{key:"sr_no",label:"Sr No.",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{label:"QR Code ID",key:"qr_code_id",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"},sorter:!1},{label:"Store ID",key:"qr_store_id",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"},sorter:!1},{label:"Store Name",key:"qr_store_name",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"},sorter:!1},{label:"Status",key:"is_active",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"},sorter:!1},{label:"Image",key:"qr_code_img",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"},sorter:!1},{label:"Created Date",key:"created_at",_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"130px"},sorter:!1},{key:"Action",label:"Action",filter:!1,sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}}],columnSorter:!0,items:_,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{qr_code_img:e=>(0,p.jsx)("td",{children:(0,p.jsx)(i.he,{className:"smarttablecardimg",orientation:"top",src:O+e.qr_code_img})}),Action:e=>(0,p.jsxs)("td",{children:[(0,p.jsx)(o.N_,{to:"#",children:(0,p.jsx)(h.A,{icon:u.K,style:{color:"blue"},size:"md",title:"Edit",onClick:()=>[q(e),C(e.id),k(!N),E(e.is_active)]})}),"\xa0\xa0\xa0",(0,p.jsx)(o.N_,{to:"#",onClick:()=>[q(e),C(e.id),S(!D),E(e.is_active)],children:(0,p.jsx)(i.t7,{src:m,width:17,height:15,title:"View QR Details"})}),(0,p.jsx)(o.N_,{to:"#",onClick:()=>(e=>{const s="".concat(O)+"/"+e,t=new Request(s,{method:"GET"});fetch(t).then((e=>{if(e.ok)return console.log(e),e.blob();console.error("Request failed:",e.statusText)})).then((e=>{const s=window.URL.createObjectURL(e),t=document.createElement("a");t.style.display="none",t.href=s,t.download="QR_code_Image_"+K(new Date)+".png",document.body.appendChild(t),t.click(),window.URL.revokeObjectURL(s)})).catch((e=>{console.error("Network error:",e)}))})(e.qr_code_img),children:(0,p.jsx)(h.A,{icon:x.n,style:{color:"blue"},size:"md",width:"17",title:"Download"})})]}),sr_no:(e,s)=>(0,p.jsx)("td",{children:s+1}),created_at:e=>(0,p.jsx)("td",{children:K(e.created_at)})},itemsPerPageOptions:[10,20,50,100],tableFilter:!0,tableProps:{color:"success-color-secondary",hover:!0,border:"1.5px solid #074",responsive:!0},tableHeadProps:{color:"light",align:"middle"},tableBodyProps:{align:"middle"},tableFilterLabel:"Search : ",tableFilterPlaceholder:"Enter String to Search",itemsPerPageLabel:"Rows per page:"})})})]}),(0,p.jsxs)(i.zS,{size:"lg",visible:F,onClose:()=>[w(!1),Q(!1),U(!1)],backdrop:"static",children:[(0,p.jsx)(i.E4,{onClose:()=>[w(!1),Q(!1),U(!1)],style:{backgroundColor:I,color:"white"},children:(0,p.jsx)(i.lb,{children:"QR Code"})}),(0,p.jsxs)(i.qI,{className:"row g-3 needs-validation",style:{margin:"10px"},noValidate:!0,validated:R,onSubmit:e=>{e.preventDefault(),z(e),e.currentTarget.checkValidity()},children:[(0,p.jsxs)(i.Tc,{children:[(0,p.jsxs)(i.sK,{sm:12,className:"",children:[(0,p.jsxs)(i.UF,{sm:6,children:[(0,p.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["QR Code Id",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(i.OG,{type:"text",id:"qr_code_id",name:"qr_code_id",required:!0,maxLength:50}),(0,p.jsx)(i.To,{invalid:!0,children:"Please enter QR Code id"})]}),(0,p.jsxs)(i.UF,{sm:6,children:[(0,p.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["QR store name",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(i.OG,{type:"text",id:"qr_store_name",name:"qr_store_name",required:!0,maxLength:50}),(0,p.jsx)(i.To,{invalid:!0,children:"Please create QR store name"})]})]}),(0,p.jsxs)(i.sK,{sm:12,className:"",children:[(0,p.jsxs)(i.UF,{sm:6,children:[(0,p.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["QR Store ID",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(i.OG,{type:"text",id:"qr_store_id",name:"qr_store_id",required:!0,maxLength:50}),(0,p.jsx)(i.To,{invalid:!0,children:"Please enter QR store Id "})]}),(0,p.jsxs)(i.UF,{sm:6,children:[(0,p.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["Upload QR Code",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(i.OG,{type:"file",id:"qr",name:"qr",accept:".png, .jpg",pattern:".*\\.(png|jpg)$",required:!0,onChange:L}),(0,p.jsx)("p",{children:" Image format must be .png or .jpg "}),(0,p.jsx)(i.To,{invalid:!0,children:"Please upload QR code"})]})]})]}),(0,p.jsxs)(i.If,{children:[(0,p.jsx)(i.Q_,{onClick:()=>[w(!1),Q(!1),U(!1)],style:{backgroundColor:"#F5F5F5",color:"black",borderColor:"#DCDCDC",border:"0px"},children:"\xa0Close\xa0"}),(0,p.jsxs)(i.Q_,{type:"submit",style:{backgroundColor:I,color:"white",border:"0px"},disabled:T,children:[(0,p.jsx)(h.A,{icon:j.B,style:{color:"white"},size:"sm"}),"\xa0 ","Submit"]})]})]})]}),(0,p.jsxs)(i.zS,{size:"lg",visible:N,onClose:()=>[k(!1),Q(!1)],backdrop:"static",children:[(0,p.jsx)(i.E4,{onClose:()=>[k(!1),Q(!1)],style:{backgroundColor:I,color:"white"},children:(0,p.jsx)(i.lb,{children:"Update QR Code"})}),(0,p.jsxs)(i.qI,{className:"row g-3 needs-validation",style:{margin:"10px"},noValidate:!0,validated:R,onSubmit:async s=>{const t=s.currentTarget;if(s.preventDefault(),!0===t.checkValidity()){const t=new FormData(s.target);if(s.target.qr1.files[0])t.append("qr",s.target.qr1.files[0]);else if(null===f||void 0===f||!f.qr)return void alert("Please upload the profile photo");let l=await e.patch("/machine/qrcode/".concat(y,"/"),t);if(1===l.data.success)alert("QR code id is updated"),Q(!1),k(!1),G();else if(0===l.data.success)for(let e=0;e<Object.values(l.data.result).length;e++){let s=Object.values(l.data.result)[e];alert(s)}}Q(!0)},children:[(0,p.jsxs)(i.Tc,{children:[(0,p.jsxs)(i.sK,{sm:12,className:"",children:[(0,p.jsxs)(i.UF,{sm:6,children:[(0,p.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["QR Code ID",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(i.OG,{type:"text",id:"qr_code_id",name:"qr_code_id",required:!0,defaultValue:null===f||void 0===f?void 0:f.qr_code_id,maxLength:50}),(0,p.jsx)(i.To,{invalid:!0,children:"Please enter QR code Id "})]}),(0,p.jsxs)(i.UF,{md:6,children:[(0,p.jsx)(i.A6,{htmlFor:"validationCustom01",children:" Status "}),(0,p.jsx)(i.MT,{id:"is_active",name:"is_active",defaultValue:null===f||void 0===f?void 0:f.is_active,required:!0,options:A}),(0,p.jsx)(i.To,{invalid:!0,children:"Please select status"})]})]}),(0,p.jsxs)(i.sK,{sm:12,className:"",children:[(0,p.jsxs)(i.UF,{sm:6,children:[(0,p.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["QR store name",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(i.OG,{type:"text",id:"qr_store_name",name:"qr_store_name",required:!0,maxLength:50,defaultValue:null===f||void 0===f?void 0:f.qr_store_name}),(0,p.jsx)(i.To,{invalid:!0,children:"Please create  QR store name"})]}),(0,p.jsxs)(i.UF,{sm:6,children:[(0,p.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["QR Store ID",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(i.OG,{type:"text",id:"qr_store_id",name:"qr_store_id",required:!0,defaultValue:null===f||void 0===f?void 0:f.qr_store_id,maxLength:50}),(0,p.jsx)(i.To,{invalid:!0,children:"Please enter QR store Id "})]})]}),(0,p.jsxs)(i.sK,{md:12,className:"mb-2",children:[(0,p.jsxs)(i.UF,{md:6,children:[(0,p.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["Upload QR Code ",(0,p.jsx)("span",{className:"text-danger",children:"*"}),null!==f&&void 0!==f&&f.qr?"":(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(i.OG,{type:"file",id:"qr",size:"sm",name:"qr1",defaultValue:"",accept:".png, .jpg",pattern:".*\\.(png|jpg)$",required:!(null!==f&&void 0!==f&&f.qr),onChange:L}),(0,p.jsx)("p",{children:"Image format must be .png or .jpg"}),(0,p.jsx)(i.To,{invalid:!0,children:"Please upload a QR Code"})]}),(null===f||void 0===f?void 0:f.qr)&&(0,p.jsxs)(i.UF,{md:6,className:"mb-2",children:[(0,p.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["QR Code",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(i.UF,{sm:2,children:(0,p.jsx)("img",{src:O+f.qr,width:"200",height:"120",alt:"Current "})})]})]})]}),(0,p.jsxs)(i.If,{children:[(0,p.jsx)(i.Q_,{onClick:()=>[k(!1),Q(!1)],style:{backgroundColor:"#F5F5F5",color:"black",borderColor:"#DCDCDC",border:"0px"},children:"\xa0Close\xa0"}),(0,p.jsxs)(i.Q_,{type:"submit",style:{backgroundColor:I,color:"white",border:"0px"},children:[(0,p.jsx)(h.A,{icon:j.B,style:{color:"white"},size:"sm"}),"\xa0Submit"]})]})]})]}),(0,p.jsxs)(i.zS,{size:"lg",visible:D,onClose:()=>[S(!1),Q(!1)],backdrop:"static",children:[(0,p.jsx)(i.E4,{onClose:()=>[S(!1),Q(!1)],style:{backgroundColor:I,color:"white"},children:(0,p.jsx)(i.lb,{children:"QR Code Details"})}),(0,p.jsxs)(i.qI,{className:"row g-3 needs-validation",style:{margin:"10px"},children:[(0,p.jsx)(i.Tc,{children:(0,p.jsxs)(i.sK,{sm:12,className:"",children:[(0,p.jsxs)(i.UF,{sm:6,children:[(0,p.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["QR Code ID",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(i.OG,{type:"text",id:"qr_code_id",name:"qr_code_id",required:!0,disabled:!0,defaultValue:null===f||void 0===f?void 0:f.qr_code_id,maxLength:50}),(0,p.jsx)(i.To,{invalid:!0,children:"Please enter QR code Id "})]}),(0,p.jsxs)(i.UF,{md:6,children:[(0,p.jsx)(i.A6,{htmlFor:"validationCustom01",children:" Status "}),(0,p.jsx)(i.MT,{id:"is_active",name:"is_active",defaultValue:null===f||void 0===f?void 0:f.is_active,required:!0,options:A,disabled:!0}),(0,p.jsx)(i.To,{invalid:!0,children:"Please select status"})]}),(0,p.jsxs)(i.sK,{md:12,className:"mb-2",children:[(0,p.jsxs)(i.UF,{sm:6,children:[(0,p.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["Store  Id",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(i.OG,{type:"text",id:"qr_store_id",name:"qr_store_id",required:!0,disabled:!0,defaultValue:null===f||void 0===f?void 0:f.qr_store_id,maxLength:50}),(0,p.jsx)(i.To,{invalid:!0,children:"Please enter Store Id "})]}),(0,p.jsxs)(i.UF,{md:6,children:[(0,p.jsx)(i.A6,{htmlFor:"validationCustom01",children:" Store Name "}),(0,p.jsx)(i.OG,{id:"qr_store_name",name:"qr_store_name",defaultValue:null===f||void 0===f?void 0:f.qr_store_name,required:!0,options:A,disabled:!0}),(0,p.jsx)(i.To,{invalid:!0,children:"Please select store name"})]})]}),(0,p.jsx)(i.sK,{md:12,className:"mb-2",children:(null===f||void 0===f?void 0:f.qr)&&(0,p.jsxs)(i.UF,{md:6,className:"mb-1",children:[(0,p.jsxs)(i.A6,{htmlFor:"validationDefault01",children:["QR Code",(0,p.jsx)("span",{className:"text-danger",children:"*"})]}),(0,p.jsx)(i.UF,{sm:2,children:(0,p.jsx)("img",{src:O+f.qr,width:"200",height:"120",alt:"Current business card"})})]})})]})}),(0,p.jsx)(i.If,{children:(0,p.jsx)(i.Q_,{onClick:()=>[S(!1),Q(!1)],style:{backgroundColor:"#F5F5F5",color:"black",borderColor:"#DCDCDC",border:"0px"},children:"\xa0Close\xa0"})})]})]})]})}},76058:(e,s,t)=>{t.d(s,{n:()=>l});const l=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='367.997 338.75 271.999 434.747 271.999 17.503 239.999 17.503 239.999 434.745 144.003 338.75 121.376 361.377 256 496 390.624 361.377 367.997 338.75' class='ci-primary'/>"]},84257:(e,s,t)=>{t.d(s,{B:()=>l});const l=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M199.066,456l-7.379-7.514-3.94-3.9-86.2-86.2.053-.055L17.936,274.665l97.614-97.613,83.565,83.565L398.388,61.344,496,158.958,296.729,358.229,285.469,369.6ZM146.6,358.183l52.459,52.46.1-.1.054.054,52.311-52.311,11.259-11.368L450.746,158.958,398.388,106.6,199.115,305.871,115.55,222.306,63.191,274.665l83.464,83.463Z' class='ci-primary'/>"]},27760:(e,s,t)=>{t.d(s,{K:()=>l});const l=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M29.663,482.25l.087.087a24.847,24.847,0,0,0,17.612,7.342,25.178,25.178,0,0,0,8.1-1.345l142.006-48.172,272.5-272.5A88.832,88.832,0,0,0,344.334,42.039l-272.5,272.5L23.666,456.541A24.844,24.844,0,0,0,29.663,482.25Zm337.3-417.584a56.832,56.832,0,0,1,80.371,80.373L411.5,180.873,331.127,100.5ZM99.744,331.884,308.5,123.127,388.873,203.5,180.116,412.256,58.482,453.518Z' class='ci-primary'/>"]}}]);