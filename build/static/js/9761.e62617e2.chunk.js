"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[9761],{69761:(e,t,l)=>{l.r(t),l.d(t,{default:()=>_});var a=l(9950),s=l(1072),o=l(74297),r=l(37017),c=l(42074),i=(l(45532),l(79988)),n=l(7864),d=l(27760),m=l(76058),u=l(84257),p=l(44885),h=l(44414);const _=function(){let e=(0,s.A)(),[t,l]=(0,a.useState)([]),[_,y]=(0,a.useState)([]);const[b,g]=(0,a.useState)(!1),[x,f]=(0,a.useState)(!1),{selectedColor:j}=(0,p.useColor)(),[w,v]=(0,a.useState)(!1),[k,N]=(0,a.useState)(!1);let[C,S]=(0,a.useState)([]),[M,P]=(0,a.useState)(),[A,D]=(0,a.useState)([]),[q,F]=(0,a.useState)([]),L=(0,o.A)();(0,a.useEffect)((()=>{W()}),[]);let W=async()=>{let t=await e.get("/machine/api/get_machine_and_qrcode_for_customer/"),a=await e.get("/machine/qrcode/"),s=await e.get("/machine/get_product_list/"),o=await e.get("/machine/modelcapacity/");if(1===t.data.success&&1===a.data.success){let e=[];for(let l=0;l<t.data.result.length;l++){let a=t.data.result[l],s={id:a.id,machine_id:a.machine_id,rqcode:a.rqcode,created_at:a.created_at,qr_code_img:a.qr_code_img,product_type:a.product_type,amount:a.amount,model_no:a.model_no,name:a.name,payment_type:a.payment_type,status:!0===a.is_active?"Active":"Inactive"};e.push(s)}let r=[{label:"",value:""}];for(let t=0;t<s.data.result.length;t++){let e=s.data.result[t],l={label:e.product_type,value:e.id,amount:e.amount};r.push(l)}let c=[];for(let t=0;t<a.data.result.length;t++){let e=a.data.result[t];if(1==e.is_active){let t={label:e.qr_code_id,value:e.id};c.push(t)}}let i=[{label:"",value:""}];for(let t=0;t<o.data.result.length;t++){let e=o.data.result[t],l={value:e.id,label:e.model_no,name:e.name};i.push(l)}S(i),l(e),y(c),D(r)}else if(0===t.data.success)for(let e=0;e<Object.values(t.data.result).length;e++){let l=Object.values(t.data.result)[e];alert(l)}};const R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;const t=new Date(e),l=String(t.getDate()).padStart(2,"0"),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()],s=t.getFullYear(),o=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0");return"".concat(l," - ").concat(a," - ").concat(s," ").concat(o,":").concat(r)};return R(),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{className:"mb-3",children:[(0,h.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,h.jsx)("h3",{className:"mb-0",style:{color:"#2C384A"},children:"Machine Master"})}),(0,h.jsx)(r.sK,{children:(0,h.jsx)(r.UF,{xs:12,children:(0,h.jsx)(r.Pd,{activePage:1,clickableRows:!0,columns:[{key:"sr_no",label:"Sr No.",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"60px"}},{label:"Machine ID",key:"machine_id",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{label:"QR Code ID",key:"rqcode",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{label:"Image",key:"qr_code_img",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{label:"Product Type",key:"product_type",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{label:"Amount",key:"amount",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{label:"Model No",key:"model_no",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{label:"Capacity",key:"name",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{label:"Payment Type",key:"payment_type",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{label:"Created Date",key:"created_at",sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}},{key:"Action",label:"Action",filter:!1,sorter:!1,_props:{color:"secondary",className:"fw-semibold"},_style:{minWidth:"100px"}}],columnSorter:!0,items:t,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{qr_code_img:e=>(0,h.jsx)("td",{children:(0,h.jsx)(r.he,{className:"smarttablecardimg",orientation:"top",src:L+e.qr_code_img})}),Action:e=>(0,h.jsxs)("td",{children:[(0,h.jsx)(c.N_,{to:"#",children:(0,h.jsx)(n.A,{icon:d.K,style:{color:"blue"},size:"md",title:"Edit",onClick:()=>[P(e),g(e.id),f(!x)]})}),"\xa0\xa0\xa0",(0,h.jsx)(c.N_,{to:"/Machineview/"+"".concat(e.id),children:(0,h.jsx)(r.t7,{src:i,width:17,height:15,title:"View Details"})}),"\xa0\xa0\xa0",(0,h.jsx)(c.N_,{to:"#",onClick:()=>(e=>{const t="".concat(L)+"/"+e,l=new Request(t,{method:"GET"});fetch(l).then((e=>{if(e.ok)return console.log(e),e.blob();console.error("Request failed:",e.statusText)})).then((e=>{const t=window.URL.createObjectURL(e),l=document.createElement("a");l.style.display="none",l.href=t,l.download="QR_code_Image_"+R(new Date)+".png",document.body.appendChild(l),l.click(),window.URL.revokeObjectURL(t)})).catch((e=>{console.error("Network error:",e)}))})(e.qr_code_img),children:(0,h.jsx)(n.A,{icon:m.n,style:{color:"blue"},size:"md",width:"17",title:"Download"})})]}),sr_no:(e,t)=>(0,h.jsx)("td",{children:t+1}),created_at:e=>(0,h.jsx)("td",{children:R(e.created_at)})},itemsPerPageOptions:[10,20,50,100],tableProps:{color:"success-color-secondary",hover:!0,border:"1.5px solid #074",responsive:!0},tableHeadProps:{color:"light",align:"middle",className:"align-middle"},tableBodyProps:{align:"middle"},tableFilterLabel:"Search : ",tableFilterPlaceholder:"Enter String to Search",itemsPerPageLabel:"Rows per page:"})})})]}),(0,h.jsxs)(r.zS,{size:"lg",visible:x,onClose:()=>[f(!1),v(!1)],backdrop:"static",children:[(0,h.jsx)(r.E4,{onClose:()=>[f(!1),v(!1)],style:{backgroundColor:j,color:"white"},children:(0,h.jsx)(r.lb,{children:"Update Machine Master"})}),(0,h.jsxs)(r.qI,{className:"row g-3 needs-validation",style:{margin:"10px"},noValidate:!0,validated:w,onSubmit:async t=>{const l=t.currentTarget;if(t.preventDefault(),!0===l.checkValidity()){const l=new FormData(t.target);let a=await e.patch("/machine/machine-masters/".concat(b,"/"),l);if(1===a.data.success)alert("Machine id is updated"),v(!1),f(!1),W();else if(0===a.data.success)for(let e=0;e<Object.values(a.data.result).length;e++){let t=Object.values(a.data.result)[e];alert(t)}}v(!0)},children:[(0,h.jsx)(r.Tc,{children:(0,h.jsxs)(r.sK,{sm:12,className:"",children:[(0,h.jsxs)(r.UF,{sm:6,children:[(0,h.jsx)(r.A6,{htmlFor:"validationDefault01",children:"Product"}),(0,h.jsx)(r.MT,{name:"product",options:A,defaultValue:null===M||void 0===M?void 0:M.product}),(0,h.jsx)(r.To,{invalid:!0,children:"Please select Product"})]}),(0,h.jsxs)(r.UF,{sm:6,children:[(0,h.jsx)(r.A6,{htmlFor:"validationDefault01",children:"Model Number"}),(0,h.jsx)(r.MT,{name:"model_number",options:C,defaultValue:null===M||void 0===M?void 0:M.model_number}),(0,h.jsx)(r.To,{invalid:!0,children:"Please select Model Number"})]})]})}),(0,h.jsxs)(r.If,{children:[(0,h.jsx)(r.Q_,{onClick:()=>[f(!1),v(!1)],style:{backgroundColor:"#F5F5F5",color:"black",borderColor:"#DCDCDC"},children:"\xa0Close\xa0"}),(0,h.jsxs)(r.Q_,{type:"submit",style:{backgroundColor:j,color:"white"},children:[(0,h.jsx)(n.A,{icon:u.B,style:{color:"white"},size:"sm"}),"\xa0Submit"]})]})]})]})]})}},76058:(e,t,l)=>{l.d(t,{n:()=>a});const a=["512 512","<polygon fill='var(--ci-primary-color, currentColor)' points='367.997 338.75 271.999 434.747 271.999 17.503 239.999 17.503 239.999 434.745 144.003 338.75 121.376 361.377 256 496 390.624 361.377 367.997 338.75' class='ci-primary'/>"]},84257:(e,t,l)=>{l.d(t,{B:()=>a});const a=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M199.066,456l-7.379-7.514-3.94-3.9-86.2-86.2.053-.055L17.936,274.665l97.614-97.613,83.565,83.565L398.388,61.344,496,158.958,296.729,358.229,285.469,369.6ZM146.6,358.183l52.459,52.46.1-.1.054.054,52.311-52.311,11.259-11.368L450.746,158.958,398.388,106.6,199.115,305.871,115.55,222.306,63.191,274.665l83.464,83.463Z' class='ci-primary'/>"]},27760:(e,t,l)=>{l.d(t,{K:()=>a});const a=["512 512","<path fill='var(--ci-primary-color, currentColor)' d='M29.663,482.25l.087.087a24.847,24.847,0,0,0,17.612,7.342,25.178,25.178,0,0,0,8.1-1.345l142.006-48.172,272.5-272.5A88.832,88.832,0,0,0,344.334,42.039l-272.5,272.5L23.666,456.541A24.844,24.844,0,0,0,29.663,482.25Zm337.3-417.584a56.832,56.832,0,0,1,80.371,80.373L411.5,180.873,331.127,100.5ZM99.744,331.884,308.5,123.127,388.873,203.5,180.116,412.256,58.482,453.518Z' class='ci-primary'/>"]}}]);