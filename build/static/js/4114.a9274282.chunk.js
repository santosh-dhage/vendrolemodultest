"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[4114],{24114:(e,s,t)=>{t.r(s),t.d(s,{default:()=>d});var a=t(9950),l=t(28429),i=t(45532),r=(t(96011),t(37017)),o=(t(94139),t(1072)),n=t(44885),c=t(44414);const d=()=>{(0,l.Zp)();const{user:e,authTokens:s}=(0,a.useContext)(i.A),[t,d]=(0,a.useState)([]),[m,h]=(0,a.useState)(!1);let p=(0,o.A)(),[u,x]=(0,a.useState)([]),[j,b]=(0,a.useState)([]);const[g,y]=(0,a.useState)(!1),[_,f]=(0,a.useState)(!1),[w,k]=(0,a.useState)(!1),[N,v]=(0,a.useState)(!1),{selectedColor:P}=(0,n.useColor)();(0,a.useEffect)((()=>{C()}),[]);let C=async()=>{let e=await p.get("machine/user_machine_mapped/"),s=await p.get("machine/get_ticket_list_customer/");if(console.log(e.data.result.length),1===e.data.success&&1===s.data.success){let t=[],a=[];for(let s=0;s<e.data.result.length;s++){let t=e.data.result[s],l={id:t.id,mid:t.machine_id};a.push(l.mid)}for(let e=0;e<s.data.result.length;e++){let a=s.data.result[e],l={ticket_no:a.ticsrno,date:S(a.created_at),time:D(a.created_at),title:a.title,machine_id:a.machine_id,priority:a.priority,status:a.status,problem_type:a.problem_type,discription:a.description,note:a.notes};t.push(l)}d(t),x(a)}else 0===e.data.success&&console.log("hhhhhhhhh")};const F=async e=>{const s=e.currentTarget;if(e.preventDefault(),!0===s.checkValidity()){const s=new FormData(e.target);let t=await p.post("/machine/create_ticket/",s);if(1===t.data.success)alert("Ticket is Created"),k(!1),y(!1),C(),window.location.reload();else if(0===t.data.success)for(let e=0;e<Object.values(t.data.result).length;e++){let s=Object.values(t.data.result)[e];alert(s)}}else k(!0)};function S(e){if(null!=e){var s=new Date(e),t=""+(s.getMonth()+1),a=""+s.getDate(),l=s.getFullYear();return t.length<2&&(t="0"+t),a.length<2&&(a="0"+a),[l,t,a].join("-")}}const D=e=>{if(null==e)return"          ";const s=new Date(e),t=(String(s.getDate()).padStart(2,"0"),s.getMonth(),s.getFullYear(),String(s.getHours()).padStart(2,"0")),a=String(s.getMinutes()).padStart(2,"0");return"".concat(t,":").concat(a)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:(0,c.jsx)(r.Q_,{onClick:()=>{y(!g)},className:"mt-2",style:{backgroundColor:P,color:"white",border:"0px"},children:"Create Ticket"})}),(0,c.jsx)(r.sK,{children:(0,c.jsx)(r.UF,{xs:12,children:(0,c.jsx)(r.Pd,{activePage:1,clickableRows:!0,columns:[{key:"sr_no",label:"Sr. No.",_props:{color:"secondary",className:"fw-semibold"}},{label:"Ticket No",key:"ticket_no",_props:{color:"secondary",className:"fw-semibold"}},{label:"Date",key:"date",_props:{color:"secondary",className:"fw-semibold"}},{label:"Time",key:"time",_props:{color:"secondary",className:"fw-semibold"}},{label:"Title",key:"title",_props:{color:"secondary",className:"fw-semibold"}},{label:"Machine ID",key:"machine_id",_props:{color:"secondary",className:"fw-semibold"}},{label:"Priority",key:"priority",_props:{color:"secondary",className:"fw-semibold"}},{key:"status",label:"Status",_props:{color:"secondary",className:"fw-semibold"}},{key:"problem_type",label:"Problem Type",_props:{color:"secondary",className:"fw-semibold"}},{key:"discription",label:"Discription",_props:{color:"secondary",className:"fw-semibold"}},{key:"note",label:"Note",_props:{color:"secondary",className:"fw-semibold"}}],items:t,itemsPerPageSelect:!0,itemsPerPage:10,pagination:!0,scopedColumns:{sr_no:(e,s)=>(0,c.jsx)("td",{children:s+1})},itemsPerPageOptions:[10,20,50,100],tableProps:{color:"success-color-secondary",hover:!0,border:"1.5px solid #074",responsive:!0},tableHeadProps:{color:"light",align:"middle",className:"align-middle"},tableBodyProps:{align:"middle",className:"align-middle"},itemsPerPageLabel:"Rows per page:"})})})]}),(0,c.jsxs)(r.zS,{size:"lg",visible:g,onClose:()=>[y(!1),k(!1),v(!1)],backdrop:"static",children:[(0,c.jsx)(r.E4,{onClose:()=>[y(!1),k(!1),v(!1)],style:{backgroundColor:P,color:"white"},children:(0,c.jsx)(r.lb,{children:"Create Ticket"})}),(0,c.jsxs)(r.qI,{className:"needs-validation mt-4",noValidate:!0,validated:w,onSubmit:F,children:[(0,c.jsxs)(r.sK,{className:"justify-content-center mx-4",children:[(0,c.jsxs)(r.sK,{sm:12,className:"",children:[(0,c.jsxs)(r.UF,{sm:12,children:[(0,c.jsxs)(r.A6,{htmlFor:"validationDefault01",children:["Title",(0,c.jsx)("span",{className:"text-danger",children:"*"})]}),(0,c.jsx)(r.OG,{type:"text",id:"title",name:"title",required:!0,pattern:"[A-Za-z\\s]+",maxLength:50}),(0,c.jsx)(r.To,{invalid:!0,children:"Please enter the title"})]}),(0,c.jsx)(r.sK,{sm:12,className:""}),(0,c.jsxs)(r.UF,{sm:6,children:[(0,c.jsxs)(r.A6,{htmlFor:"validationDefault01",children:["Machine ID",(0,c.jsx)("span",{className:"text-danger",children:"*"})]}),(0,c.jsx)(r.MT,{name:"machine_map",id:"machine_map",options:u,required:!0}),(0,c.jsx)(r.To,{invalid:!0,children:"Please select Machine id"})]}),(0,c.jsxs)(r.UF,{sm:6,children:[(0,c.jsxs)(r.A6,{htmlFor:"validationDefault01",children:["Problem Type",(0,c.jsx)("span",{className:"text-danger",children:"*"})]}),(0,c.jsxs)(r.MT,{name:"problem_type",id:"problem_type",required:!0,children:[(0,c.jsx)("option",{children:"Choose..."}),(0,c.jsx)("option",{value:"software",children:"Software"}),(0,c.jsx)("option",{value:"hardware",children:"Hardware"}),(0,c.jsx)("option",{value:"other",children:"Other"})]}),(0,c.jsx)(r.To,{invalid:!0,children:"Please select Problem type "})]})]}),(0,c.jsx)(r.sK,{sm:12,className:"",children:(0,c.jsxs)(r.UF,{sm:6,children:[(0,c.jsxs)(r.A6,{htmlFor:"validationDefault01",children:["Priority",(0,c.jsx)("span",{className:"text-danger",children:"*"})]}),(0,c.jsxs)(r.MT,{name:"priority",id:"priority",required:!0,children:[(0,c.jsx)("option",{children:"Choose..."}),(0,c.jsx)("option",{value:"low",children:"Low"}),(0,c.jsx)("option",{value:"medium",children:"Medium"}),(0,c.jsx)("option",{value:"high",children:"High"})]}),(0,c.jsx)(r.To,{invalid:!0,children:"Please select Problem type "})]})}),(0,c.jsx)(r.sK,{sm:12,className:"",children:(0,c.jsxs)(r.UF,{sm:6,children:[(0,c.jsxs)(r.A6,{htmlFor:"validationDefault01",children:["Description",(0,c.jsx)("span",{className:"text-danger",children:"*"})]}),(0,c.jsx)(r.Im,{type:"text",id:"description",name:"description",rows:3,required:!0,maxLength:200}),(0,c.jsx)(r.To,{invalid:!0,children:"Please enter the description"})]})}),(0,c.jsx)(r.sK,{sm:12,className:"",children:(0,c.jsxs)(r.UF,{sm:6,children:[(0,c.jsxs)(r.A6,{htmlFor:"validationDefault01",children:["Note",(0,c.jsx)("span",{className:"text-danger",children:"*"})]}),(0,c.jsx)(r.Im,{type:"text",id:"notes",name:"notes",rows:3,required:!0,maxLength:200}),(0,c.jsx)(r.To,{invalid:!0,children:"Please enter the note"})]})})]}),(0,c.jsx)("div",{className:"d-flex justify-content-center mt-4 mb-4"})]}),(0,c.jsxs)(r.If,{children:[(0,c.jsx)(r.Q_,{onClose:()=>[y(!1),k(!1),v(!1)],style:{backgroundColor:"#F5F5F5",color:"black",borderColor:"#DCDCDC"},children:"\xa0Close\xa0"}),(0,c.jsx)(r.Q_,{type:"submit",style:{backgroundColor:P,color:"white"},children:"\xa0Submit"})]})]})]})}},94139:(e,s,t)=>{e.exports=t.p+"static/media/Feedback.bfef9234218d86b7b0ee.gif"}}]);